# `commitlint` и `lint-staged`

## Минимальные действия

Откройте терминал в корневой папке вашего проекта и выполните команду:

```bash
npm i && npm run postinstall
```

Затем в вашем `package.json` (для разработчика, настраивающего `WebPack`):

```json
// package.json
{
  // ...
  "lint-staged": {
    "*.{js,jsx}": "eslint --fix",
    "*.{css,scss}": "stylelint --fix",
    "*.{json,md}": "prettier --write",
    "*.html": ["prettier --write", "htmlhint"]
  }
  // ...
}
```

## Зачем `commitlint` в проекте

`commitlint` нужен для установления и соблюдения определенных стандартов оформления сообщений коммитов в проекте. Он помогает создавать читаемую, структурированную и информативную историю изменений.

Вот почему `commitlint` полезен:

1. **Соблюдение стандартов**: Устанавливает четкие правила для написания сообщений коммитов, что помогает всей команде поддерживать единообразный стиль.
2. **Улучшение читаемости и понимаемости**: Сообщения коммитов становятся более информативными, что упрощает понимание, какие изменения были внесены в код.
3. **Легкость навигации в истории**: Правильно оформленные коммиты облегчают поиск конкретных изменений в истории проекта.
4. **Автоматический контроль качества сообщений**: `commitlint` позволяет автоматически проверять сообщения перед коммитом и предотвращать фиксацию неправильно оформленных коммитов.
5. **Поддержка командной работы**: Стандартизированные сообщения коммитов упрощают совместную работу над проектом и обмен информацией о внесенных изменениях.

Таким образом, `commitlint` помогает поддерживать порядок в истории разработки, что особенно важно при работе над крупными и долгосрочными проектами с большой командой разработчиков.

## Зачем `lint-staged` в проекте

`lint-staged` - это инструмент, который позволяет автоматизировать проверки и форматирование кода перед каждым коммитом в системе контроля версий (например, Git). Вот несколько причин, почему `lint-staged` может быть полезен:

1. **Поддержание качества кода**: Проверка кода перед коммитом помогает предотвратить фиксацию ошибок или стилистических нарушений.
2. **Соблюдение стандартов**: Обеспечение соблюдения стандартов кодирования и стилей в проекте.
3. **Автоматические исправления**: Возможность автоматически исправлять проблемы, которые могут быть автоматически решены (например, исправление отступов, кавычек и т.д.).
4. **Экономия времени**: Уменьшение необходимости ручной проверки кода перед каждым коммитом.
5. **Поддержка команды**: Облегчает соблюдение стандартов и правил оформления в команде, улучшая читаемость и понимание кода.
6. **Улучшение читаемости и понимания изменений**: Стандартизированные коммиты облегчают понимание, какие изменения были внесены в код.

## Установка `Husky`

`Husky` - это инструмент, который позволяет легко настраивать и автоматизировать использование `git hooks` в проекте. `Git hooks` - это скрипты, которые запускаются в определенные моменты работы с репозиторием (например, перед коммитом, перед пушем и т.д.). `Husky` облегчает управление этими хуками, что позволяет автоматизировать различные задачи, такие как проверка кода перед коммитом, форматирование кода, и многое другое. Это помогает поддерживать качество кода и соблюдать стандарты оформления в проекте.

Если у вас еще нет `Husky`, установите его:

```bash
npm install husky --save-dev
```

Добавление скриптов:

```bash
# ./.husky/commit-msg
#!/bin/sh
npx commitlint --edit $1
```

```bash
# ./.husky/pre-commit
#!/bin/sh
npx lint-staged
```

## Установка линтеров

### Установка линтера `ESLint`

`ESLint` - это инструмент для статического анализа `JavaScript-кода`. `ESLint` позволяет улучшить читаемость и качество кода, облегчая его поддержку и совместную работу над проектом.

Откройте терминал в корневой папке вашего проекта и выполните команду:

```bash
npm install eslint --save-dev
```

Эта команда установит `ESLint` как зависимость разработки и добавит его в файл `package.json`.

Файл настройки для `ESLint` называется `.eslintrc.js` и он располагается в корневой папке вашего проекта. В этом файле определяются все настройки правил и конфигурации для линтера.

```js
// .eslintrc.js
module.exports = {
  env: {
    browser: true,
    node: true,
    es2021: true,
  },
  extends: "eslint:recommended",
  parserOptions: {
    ecmaVersion: 12,
    sourceType: "module",
  },
  rules: {
    indent: ["error", 2],
    quotes: ["error", "single"],
    semi: ["error", "always"],
  },
};
```

### Установка линтера `Stylelint`

`Stylelint` - это инструмент для статического анализа `CSS` кода. Он предназначен для выявления потенциальных проблем, ошибок и несоответствий соглашениям о стилях написания `CSS`. `Stylelint` помогает улучшить качество и читаемость кода, облегчая его поддержку и совместную работу над проектом.

В корневой папке вашего проекта выполните команду:

```bash
npm install stylelint --save-dev
```

В корне вашего проекта создайте файл `.stylelintrc` (или `.stylelintrc.json` для JSON формата) и определите правила оформления `CSS`.

```json
// .stylelintrc.json
{
  "extends": "stylelint-config-standard"
}
```

### Установка линтера `Prettier`

`Prettier` - это инструмент автоматического форматирования кода. Он предназначен для автоматического приведения исходного кода к единообразному стилю согласно заранее заданным правилам. `Prettier` помогает поддерживать чистоту и читаемость кода, снижая необходимость вручную выравнивать и форматировать файлы.

В корневой папке вашего проекта выполните команду:

```bash
npm install prettier --save-dev
```

Эта команда установит `Prettier` как зависимость разработки и добавит его в файл `package.json`.

В корне вашего проекта создайте файл `.prettierrc` (или `.prettierrc.json` для `JSON` формата) и определите правила форматирования кода.

```json
// .prettierrc.json
{
  "trailingComma": "es5",
  "tabWidth": 2,
  "semi": false,
  "singleQuote": true,
  "jsxSingleQuote": true,
  "arrowParens": "always",
  "useTabs": false
}
```

### Установка линтера `HTMLHint`

`HTMLHint` - это инструмент для статического анализа `HTML`. `HTMLHint` помогает улучшить качество и читаемость кода в `HTML-файлах`, облегчая поддержку и совместную работу над проектом.

В корневой папке вашего проекта выполните команду:

```bash
npm install htmlhint --save-dev
```

Эта команда установит `HTMLHint` как зависимость разработки и добавит его в файл `package.json`.

В корне вашего проекта создайте файл `.htmlhintrc.json` и определите правила проверки `HTML-кода`.

```json
// .htmlhintrc.json
{
  "tag-pair": true,
  "doctype-first": false,
  "id-unique": true,
  "attr-lowercase": true,
  "attr-value-double-quotes": true,
  "doctype-html5": true,
  "tagname-lowercase": true,
  "attr-no-duplication": true,
  "spec-char-escape": true,
  "id-class-value": "underline",
  "style-disabled": true
}
```

## Установка `commitlint`

```bash
npm install @commitlint/{config-conventional,cli} --save-dev
```

Эти пакеты включают конфигурацию для соглашения о стиле коммитов и инструмент командной строки для проверки коммитов.

В корне вашего проекта создайте файл `commitlint.config.js` и добавьте следующее:

```js
// commitlint.config.js
module.exports = { extends: ["@commitlint/config-conventional"] };
```

Этот файл указывает `commitlint` использовать стандартные настройки соглашения о стиле коммитов.

## Установка `lint-staged`

В командной строке или терминале перейдите в корневую папку вашего проекта и выполните следующую команду для установки `lint-staged`:

```bash
npm install lint-staged --save-dev
```

Эта команда установит `lint-staged` и добавит его как зависимость разработки в файл `package.json`.

Настройте `lint-staged` в `package.json`:

В файле `package.json` добавьте секцию `lint-staged` и определите, какие команды должны быть запущены для проверки файлов перед коммитом.

```json
// package.json
"lint-staged": {
  "*.{js,jsx}": "eslint --fix",
  "*.{css,scss}": "stylelint --fix",
  "*.{json,md}": "prettier --write",
  "*.html": [
    "prettier --write",
    "htmlhint"
  ]
}
```
